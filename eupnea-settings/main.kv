#:import hex kivy.utils.get_color_from_hex
#:import CardTransition kivy.uix.screenmanager.CardTransition
#:import FallOutTransition kivy.uix.screenmanager.FallOutTransition
#:import NoScrollEffect kivy.effects.scroll.ScrollEffect
#:import Factory kivy.factory.Factory

<CustomLabel@Label>
    font_size: 20
    valign: "center"
    size_hint: 1, None
    text_size: self.size
    height: 30
    background_color: (0, 0, 0, 0)
    canvas.before:
        Color:
            rgba: self.background_color
        Rectangle:
            pos: self.pos
            size: self.size

<LoadingImage@Image>
    angle: 0
    canvas.before:
        PushMatrix
        Rotate:
            angle: self.angle
            origin: self.center
    canvas.after:
        PopMatrix

<MenuButton@Button>
    color: hex('#ffffff') if self.state == 'normal' else hex('#f7fcfa')
    background_normal: ""
    background_color: (0,0,0,0)
    font_size: 20
    valign: "center"
    halign: "center"
    text_size: self.size
    canvas.before:
        Color:
            rgba: hex('#17181a') if self.state == 'normal' else hex('#4f5055')
        Rectangle:
            pos: self.pos
            size: self.size

<RoundedButton@Button>
    color: hex('#f7fcfa') if self.state == 'normal' else hex('#f7fcfa')
    background_normal: ""
    background_color: (0,0,0,0)
    font_size: self.width / 12
    canvas.before:
        Color:
            rgba: hex('#00bc7d') if self.state == 'normal' else hex('#2f312c')
        RoundedRectangle:
            pos: self.pos
            size: self.size
            radius: [self.width/25]

<SettingsScreen@Screen>:
    canvas.before:
        Color:
            rgba: hex('#1e2024')
        Rectangle:
            pos: self.pos
            size: self.size
    AnchorLayout:
        anchor_x: "left"
        anchor_y: "center"

        # Background image
        Image:
            source: "assets/backgrounds/dark.png"
            allow_stretch: True
            keep_ratio: False
            size_hint: 0.22, root.height

        BoxLayout:
            orientation: "horizontal"
            ScrollView:
                effect_cls: "ScrollEffect"
                pos_hint_y: 0.1
                size_hint: 0.22, 1
                do_scroll_x: False
                do_scroll_y: True
                scroll_wheel_distance: 100
                # TODO: Make widget unscrollable with right click
                on_touch_down: True
                BoxLayout:
                    orientation: "vertical"
                    size_hint: 1, None
                    height: self.minimum_height
                    id: side_bar
                    MenuButton:
                        text: "Audio"
                        id: side_bar_button_1
                        size_hint_y: None
                        height: side_bar_fake_button.height / 2
                        on_press: root.side_bar_button_clicked(self)
                    MenuButton:
                        text: "Keyboard"
                        id: side_bar_button_2
                        size_hint_y: None
                        height: side_bar_fake_button.height / 2
                        on_press: root.side_bar_button_clicked(self)
                    MenuButton:
                        text: "Install location"
                        id: side_bar_button_3
                        size_hint_y: None
                        height: side_bar_fake_button.height / 2
                        on_press: root.side_bar_button_clicked(self)
                    MenuButton:
                        text: "Kernel"
                        id: side_bar_button_4
                        size_hint_y: None
                        height: side_bar_fake_button.height / 2
                        on_press: root.side_bar_button_clicked(self)
                    MenuButton:
                        text: "ZRAM"
                        id: side_bar_button_5
                        size_hint_y: None
                        height: side_bar_fake_button.height / 2
                        on_press: root.side_bar_button_clicked(self)
                    MenuButton:
                        text: "About"
                        id: side_bar_button_6
                        size_hint_y: None
                        height: side_bar_fake_button.height / 2
                        on_press: root.side_bar_button_clicked(self)
                    MenuButton:
                        text: "Help"
                        id: side_bar_button_7
                        size_hint_y: None
                        height: side_bar_fake_button.height / 2
                        on_press: root.side_bar_button_clicked(self)
                    # This button is just here to help the other buttons set their sizes.
                    MenuButton:
                        text: ""
                        opacity: 0
                        id: side_bar_fake_button
                        size_hint: 1, None

            BoxLayout:
                orientation: "vertical"
                size_hint: 0.78, 1
                padding: 50
                id: screen_content_box




<WindowManager>:
    BlankScreen:

    Screen1:
    Screen2:
    Screen3:
    Screen4:
    Screen5:
    Screen6:
    Screen7:

<BlankScreen>:
    name: "blank"
    canvas.before:
        Color:
            rgba: hex('#1a1c19')
        Rectangle:
            pos: self.pos
            size: self.size


<Screen1@SettingsScreen>:
    name: "screen_1"
<Screen2@SettingsScreen>:
    name: "screen_2"
<Screen3@SettingsScreen>:
    name: "screen_3"
<Screen4@SettingsScreen>:
    name: "screen_4"
<Screen5@SettingsScreen>:
    name: "screen_5"
<Screen6@SettingsScreen>:
    name: "screen_6"
<Screen7@SettingsScreen>:
    name: "screen_7"